{
    "url": "https://api.github.com/repos/ankidroid/Anki-Android/issues/10902",
    "repository_url": "https://api.github.com/repos/ankidroid/Anki-Android",
    "labels_url": "https://api.github.com/repos/ankidroid/Anki-Android/issues/10902/labels{/name}",
    "comments_url": "https://api.github.com/repos/ankidroid/Anki-Android/issues/10902/comments",
    "events_url": "https://api.github.com/repos/ankidroid/Anki-Android/issues/10902/events",
    "html_url": "https://github.com/ankidroid/Anki-Android/pull/10902",
    "id": 1206247216,
    "node_id": "PR_kwDOAHXAE842Ukqg",
    "number": 10902,
    "title": "[Need Feedback/Help] Draft Fix for Study Shortcut Bug",
    "user": {
        "login": "raymondwzeng",
        "id": 13594022,
        "node_id": "MDQ6VXNlcjEzNTk0MDIy",
        "avatar_url": "https://avatars.githubusercontent.com/u/13594022?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/raymondwzeng",
        "html_url": "https://github.com/raymondwzeng",
        "followers_url": "https://api.github.com/users/raymondwzeng/followers",
        "following_url": "https://api.github.com/users/raymondwzeng/following{/other_user}",
        "gists_url": "https://api.github.com/users/raymondwzeng/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/raymondwzeng/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/raymondwzeng/subscriptions",
        "organizations_url": "https://api.github.com/users/raymondwzeng/orgs",
        "repos_url": "https://api.github.com/users/raymondwzeng/repos",
        "events_url": "https://api.github.com/users/raymondwzeng/events{/privacy}",
        "received_events_url": "https://api.github.com/users/raymondwzeng/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 278895920,
            "node_id": "MDU6TGFiZWwyNzg4OTU5MjA=",
            "url": "https://api.github.com/repos/ankidroid/Anki-Android/labels/Help%20Wanted",
            "name": "Help Wanted",
            "color": "fef2c0",
            "default": false,
            "description": "Requesting Pull Requests from volunteers"
        },
        {
            "id": 1107520814,
            "node_id": "MDU6TGFiZWwxMTA3NTIwODE0",
            "url": "https://api.github.com/repos/ankidroid/Anki-Android/labels/Needs%20Triage",
            "name": "Needs Triage",
            "color": "85fcab",
            "default": false,
            "description": ""
        },
        {
            "id": 2105691767,
            "node_id": "MDU6TGFiZWwyMTA1NjkxNzY3",
            "url": "https://api.github.com/repos/ankidroid/Anki-Android/labels/Stale",
            "name": "Stale",
            "color": "a5f7ca",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2022-04-17T00:35:34Z",
    "updated_at": "2022-06-28T22:38:48Z",
    "closed_at": "2022-06-28T22:38:48Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": true,
    "pull_request": {
        "url": "https://api.github.com/repos/ankidroid/Anki-Android/pulls/10902",
        "html_url": "https://github.com/ankidroid/Anki-Android/pull/10902",
        "diff_url": "https://github.com/ankidroid/Anki-Android/pull/10902.diff",
        "patch_url": "https://github.com/ankidroid/Anki-Android/pull/10902.patch",
        "merged_at": null
    },
    "body": "## Purpose / Description\r\nThis PR was intended to fix a pair of bugs that occur as a result of the current app behavior associated with the \"Study\" shortcut. \r\n\r\nI took a swing for about a day or so, and have _a_ solution, but unfortunately, it introduces a bug of its own. So I'm leaving it as a draft to solicit feedback or advice from others for now.\r\n\r\n## Fixes\r\nThis PR fixes #10840 and fixes #10841.\r\n\r\n## Approach\r\nI decided to switch the shortcut to open DeckPicker rather than the Reviewer, and then have the DeckPicker launch a review using the selected deck.\r\n\r\n## How Has This Been Tested?\r\n\r\nThis was manually tested on my OnePlus 8T, running Android 11.\r\n\r\nThe suite of DeckPicker tests was also run to ensure no regressions were introduced.\r\n![image](https://user-images.githubusercontent.com/13594022/163695072-a958dd0a-a97d-4db0-a5aa-08ca3245aa5a.png)\r\n\r\n\r\nhttps://user-images.githubusercontent.com/13594022/163695272-eb16b23b-7622-4cfb-944f-e8ebf1a19d81.mp4\r\n\r\n\r\nhttps://user-images.githubusercontent.com/13594022/163695276-fc494435-c92b-43fe-9619-63796bb7e734.mp4\r\n\r\n\r\n\r\n## Learning + Current Issue\r\nNavigation is a strange beast and a part of the Android API that I don't have much experience in. Following @BrayanDSO's advice, I tried to find some way to manually push an Activity onto the backstack, but a search didn't seem to pull up anything worthwhile (though that may still be the better approach, let me know!)\r\n\r\nMy current workaround is to open DeckPicker first, then navigate to Reviewer. However, my approach introduces a new issue, in that on decks with no cards, it will still return the \"Congrats!\" snack bar despite not having studied anything.\r\n\r\nAn attempt was made to utilize _handleDeckSelection()_ to show the appropriate snackbar without launching to the reviewer, but this caused a NPE as the collection list/tree is not initialized. I tried to use _\\_\\_renderPage()_ to populate the structure, but I was unsuccessful in handling this. Any advice on this front (or if a better approach can be implemented) would be appreciated.\r\n\r\n## Checklist\r\n_Please, go through these checks before submitting the PR._\r\n\r\n- [x] You have not changed whitespace unnecessarily (it makes diffs hard to read)\r\n- [x] You have a descriptive commit message with a short title (first line, max 50 chars).\r\n- [x] Your code follows the style of the project (e.g. never omit braces in `if` statements) \r\n- [x] You have commented your code, particularly in hard-to-understand areas\r\n- [x] You have performed a self-review of your own code\r\n- [ ] UI changes: include screenshots of all affected screens (in particular showing any new or changed strings)\r\n- [ ] UI Changes: You have tested your change using the [Google Accessibility Scanner](https://play.google.com/store/apps/details?id=com.google.android.apps.accessibility.auditor)\r\n",
    "closed_by": {
        "login": "github-actions[bot]",
        "id": 41898282,
        "node_id": "MDM6Qm90NDE4OTgyODI=",
        "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/github-actions%5Bbot%5D",
        "html_url": "https://github.com/apps/github-actions",
        "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
        "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
        "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
        "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
        "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
        "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
        "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
        "type": "Bot",
        "site_admin": false
    },
    "reactions": {
        "url": "https://api.github.com/repos/ankidroid/Anki-Android/issues/10902/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/ankidroid/Anki-Android/issues/10902/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}