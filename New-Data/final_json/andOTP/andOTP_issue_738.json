{
    "url": "https://api.github.com/repos/andOTP/andOTP/issues/738",
    "repository_url": "https://api.github.com/repos/andOTP/andOTP",
    "labels_url": "https://api.github.com/repos/andOTP/andOTP/issues/738/labels{/name}",
    "comments_url": "https://api.github.com/repos/andOTP/andOTP/issues/738/comments",
    "events_url": "https://api.github.com/repos/andOTP/andOTP/issues/738/events",
    "html_url": "https://github.com/andOTP/andOTP/pull/738",
    "id": 797281358,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTY0MzE3ODgw",
    "number": 738,
    "title": "#635 move authentication to a background thread",
    "user": {
        "login": "jsoberg",
        "id": 1057406,
        "node_id": "MDQ6VXNlcjEwNTc0MDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1057406?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsoberg",
        "html_url": "https://github.com/jsoberg",
        "followers_url": "https://api.github.com/users/jsoberg/followers",
        "following_url": "https://api.github.com/users/jsoberg/following{/other_user}",
        "gists_url": "https://api.github.com/users/jsoberg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jsoberg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jsoberg/subscriptions",
        "organizations_url": "https://api.github.com/users/jsoberg/orgs",
        "repos_url": "https://api.github.com/users/jsoberg/repos",
        "events_url": "https://api.github.com/users/jsoberg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jsoberg/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 640549557,
            "node_id": "MDU6TGFiZWw2NDA1NDk1NTc=",
            "url": "https://api.github.com/repos/andOTP/andOTP/labels/enhancement",
            "name": "enhancement",
            "color": "84b6eb",
            "default": true,
            "description": null
        }
    ],
    "state": "closed",
    "locked": true,
    "assignee": {
        "login": "flocke",
        "id": 76665,
        "node_id": "MDQ6VXNlcjc2NjY1",
        "avatar_url": "https://avatars.githubusercontent.com/u/76665?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flocke",
        "html_url": "https://github.com/flocke",
        "followers_url": "https://api.github.com/users/flocke/followers",
        "following_url": "https://api.github.com/users/flocke/following{/other_user}",
        "gists_url": "https://api.github.com/users/flocke/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/flocke/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/flocke/subscriptions",
        "organizations_url": "https://api.github.com/users/flocke/orgs",
        "repos_url": "https://api.github.com/users/flocke/repos",
        "events_url": "https://api.github.com/users/flocke/events{/privacy}",
        "received_events_url": "https://api.github.com/users/flocke/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "flocke",
            "id": 76665,
            "node_id": "MDQ6VXNlcjc2NjY1",
            "avatar_url": "https://avatars.githubusercontent.com/u/76665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/flocke",
            "html_url": "https://github.com/flocke",
            "followers_url": "https://api.github.com/users/flocke/followers",
            "following_url": "https://api.github.com/users/flocke/following{/other_user}",
            "gists_url": "https://api.github.com/users/flocke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/flocke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/flocke/subscriptions",
            "organizations_url": "https://api.github.com/users/flocke/orgs",
            "repos_url": "https://api.github.com/users/flocke/repos",
            "events_url": "https://api.github.com/users/flocke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/flocke/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": {
        "url": "https://api.github.com/repos/andOTP/andOTP/milestones/18",
        "html_url": "https://github.com/andOTP/andOTP/milestone/18",
        "labels_url": "https://api.github.com/repos/andOTP/andOTP/milestones/18/labels",
        "id": 5415434,
        "node_id": "MDk6TWlsZXN0b25lNTQxNTQzNA==",
        "number": 18,
        "title": "v0.9.0",
        "description": "This will be the first maintenance release after the storage rework in v0.8.1. All storage-related issues will be gathered here to be re-examined after that.",
        "creator": {
            "login": "flocke",
            "id": 76665,
            "node_id": "MDQ6VXNlcjc2NjY1",
            "avatar_url": "https://avatars.githubusercontent.com/u/76665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/flocke",
            "html_url": "https://github.com/flocke",
            "followers_url": "https://api.github.com/users/flocke/followers",
            "following_url": "https://api.github.com/users/flocke/following{/other_user}",
            "gists_url": "https://api.github.com/users/flocke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/flocke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/flocke/subscriptions",
            "organizations_url": "https://api.github.com/users/flocke/orgs",
            "repos_url": "https://api.github.com/users/flocke/repos",
            "events_url": "https://api.github.com/users/flocke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/flocke/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 69,
        "state": "closed",
        "created_at": "2020-05-13T14:42:44Z",
        "updated_at": "2021-06-13T18:20:03Z",
        "due_on": null,
        "closed_at": "2021-06-13T18:20:03Z"
    },
    "comments": 12,
    "created_at": "2021-01-30T00:04:16Z",
    "updated_at": "2021-02-05T05:25:17Z",
    "closed_at": "2021-02-05T05:25:17Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
        "url": "https://api.github.com/repos/andOTP/andOTP/pulls/738",
        "html_url": "https://github.com/andOTP/andOTP/pull/738",
        "diff_url": "https://github.com/andOTP/andOTP/pull/738.diff",
        "patch_url": "https://github.com/andOTP/andOTP/pull/738.patch",
        "merged_at": "2021-02-05T05:25:17Z"
    },
    "body": "Ok, so I added an ASyncTask to run the authentication code, with a callback to the Activity when it completes (still finishing the Activity on the main thread). While the task is running, I added an indeterminate progress bar that replaces the \"unlock\" button to provide some feedback to the user: \r\n\r\nhttps://user-images.githubusercontent.com/1057406/106338658-56f2c580-6262-11eb-8816-9c88006b6d2f.mp4\r\n\r\nOne small caveat here is that I call `.get()` on the task if the Activity is being paused. I did this to prevent the task from calling back to a dead activity for the case where the user initiates the unlock process and rotates their phone (or some other config change). \r\n\r\nIf this situation happens, the task will complete and the Activity will finish as expected, however the main thread will be locked while `.get()` is called (as it was before). Locking the main thread here isn't ideal, but seeing as this is a short-lived (1-2 second) task and the situation is unlikely to happen it's probably not a big issue. \r\n\r\nTo get around this we'd probably have to start using a retained fragment within the Activity (to store the task), and then in `onCreate` check for that retained fragment and tie the newly created Activity into it for a callback. This is definitely doable, however it'd probably make more sense to wait and see if we implement a general background execution scheme for the app before doing that work.\r\n    \r\nLet me know if you see any issues and I'll make necessary changes. I tested this on a Samsung device and on an emulator for both the cases of regular login and changing/upgrading authentication, with configuration changes in between and didn't run into any issues with the changes.",
    "closed_by": {
        "login": "flocke",
        "id": 76665,
        "node_id": "MDQ6VXNlcjc2NjY1",
        "avatar_url": "https://avatars.githubusercontent.com/u/76665?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flocke",
        "html_url": "https://github.com/flocke",
        "followers_url": "https://api.github.com/users/flocke/followers",
        "following_url": "https://api.github.com/users/flocke/following{/other_user}",
        "gists_url": "https://api.github.com/users/flocke/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/flocke/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/flocke/subscriptions",
        "organizations_url": "https://api.github.com/users/flocke/orgs",
        "repos_url": "https://api.github.com/users/flocke/repos",
        "events_url": "https://api.github.com/users/flocke/events{/privacy}",
        "received_events_url": "https://api.github.com/users/flocke/received_events",
        "type": "User",
        "site_admin": false
    },
    "reactions": {
        "url": "https://api.github.com/repos/andOTP/andOTP/issues/738/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/andOTP/andOTP/issues/738/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}