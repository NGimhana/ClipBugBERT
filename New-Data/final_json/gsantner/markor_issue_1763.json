{
    "url": "https://api.github.com/repos/gsantner/markor/issues/1763",
    "repository_url": "https://api.github.com/repos/gsantner/markor",
    "labels_url": "https://api.github.com/repos/gsantner/markor/issues/1763/labels{/name}",
    "comments_url": "https://api.github.com/repos/gsantner/markor/issues/1763/comments",
    "events_url": "https://api.github.com/repos/gsantner/markor/issues/1763/events",
    "html_url": "https://github.com/gsantner/markor/issues/1763",
    "id": 1312741804,
    "node_id": "I_kwDOBgwFIs5OPtms",
    "number": 1763,
    "title": "Crash: after install markor 2.10.0 , if I don't give permission to markor, app will crash",
    "user": {
        "login": "XYIheng",
        "id": 31406320,
        "node_id": "MDQ6VXNlcjMxNDA2MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/31406320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/XYIheng",
        "html_url": "https://github.com/XYIheng",
        "followers_url": "https://api.github.com/users/XYIheng/followers",
        "following_url": "https://api.github.com/users/XYIheng/following{/other_user}",
        "gists_url": "https://api.github.com/users/XYIheng/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/XYIheng/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/XYIheng/subscriptions",
        "organizations_url": "https://api.github.com/users/XYIheng/orgs",
        "repos_url": "https://api.github.com/users/XYIheng/repos",
        "events_url": "https://api.github.com/users/XYIheng/events{/privacy}",
        "received_events_url": "https://api.github.com/users/XYIheng/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/gsantner/markor/milestones/16",
        "html_url": "https://github.com/gsantner/markor/milestone/16",
        "labels_url": "https://api.github.com/repos/gsantner/markor/milestones/16/labels",
        "id": 8185707,
        "node_id": "MI_kwDOBgwFIs4AfOdr",
        "number": 16,
        "title": "Markor v2.11",
        "description": "",
        "creator": {
            "login": "gsantner",
            "id": 6735650,
            "node_id": "MDQ6VXNlcjY3MzU2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6735650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gsantner",
            "html_url": "https://github.com/gsantner",
            "followers_url": "https://api.github.com/users/gsantner/followers",
            "following_url": "https://api.github.com/users/gsantner/following{/other_user}",
            "gists_url": "https://api.github.com/users/gsantner/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gsantner/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gsantner/subscriptions",
            "organizations_url": "https://api.github.com/users/gsantner/orgs",
            "repos_url": "https://api.github.com/users/gsantner/repos",
            "events_url": "https://api.github.com/users/gsantner/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gsantner/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 1,
        "closed_issues": 87,
        "state": "open",
        "created_at": "2022-07-11T21:23:22Z",
        "updated_at": "2023-08-15T15:43:09Z",
        "due_on": null,
        "closed_at": null
    },
    "comments": 3,
    "created_at": "2022-07-21T06:44:38Z",
    "updated_at": "2022-08-06T17:11:54Z",
    "closed_at": "2022-08-06T12:36:14Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "# IMPORTANT\r\n* App version: 2.10.0\r\n* Android version/rom: 8.0\r\n* Device: Google Pixel 2\r\n* I accept that this issue will be closed without further notice in case I didn't describe the problem including general information, or didn't [search](https://github.com/gsantner/markor/issues?q=) for similar issues & [requests](https://github.com/gsantner/markor/discussions?discussions_q=).\r\n\r\n## Explain the Problem\r\nwhen I install the newest version 2.10.0, if I don't give storage permission to markor, it will crash.\r\n\r\nsee the bug video:\r\n\r\nhttps://user-images.githubusercontent.com/31406320/180146864-fa530aae-39bc-4e0a-b402-6a4ac9d306ad.mp4\r\n\r\nHowever, when I used version 2.8.1, this bug did not occur. \r\nsee the normal behaviour with version 2.8.1:\r\n\r\nhttps://user-images.githubusercontent.com/31406320/180146879-31165f69-8e96-46af-a4e0-4e95df0bdc6a.mp4\r\n\r\n\r\n\r\n## Steps to Reproduce\r\n1. install markor 2.10.0\r\n2. open markor\r\n3. click next to bypass the welcome pages\r\n4. when it requires storage permission, click cancel.\r\n5. click done\r\n6. click ok\r\n7. see the crash\r\n\r\n\r\n\r\n## Log\r\n<details>\r\n<summary>Log</summary>\r\ncrash trace:\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: *** FATAL EXCEPTION IN SYSTEM PROCESS: main\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: java.lang.NullPointerException: Attempt to invoke virtual method 'void com.android.server.net.NetworkPolicyManagerService.bindNotificationManager(android.app.INotificationManager)' on a null object reference\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: \tat com.android.server.SystemServer.startOtherServices(SystemServer.java:1156)\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: \tat com.android.server.SystemServer.run(SystemServer.java:396)\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: \tat com.android.server.SystemServer.main(SystemServer.java:260)\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: \tat java.lang.reflect.Method.invoke(Native Method)\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: \tat com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\r\n07-21 06:17:50.122  1706  1706 E AndroidRuntime: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: FATAL EXCEPTION: main\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: Process: net.gsantner.markor, PID: 4327\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: java.lang.IllegalArgumentException: Receiver not registered: android.support.v7.app.AppCompatDelegateImpl$AutoNightModeManager$1@5c50885\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:1175)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1433)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:639)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:639)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:639)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.support.v7.app.AppCompatDelegateImpl$AutoNightModeManager.cleanup(AppCompatDelegateImpl.java:2720)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.support.v7.app.AppCompatDelegateImpl.onStop(AppCompatDelegateImpl.java:443)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.support.v7.app.AppCompatDialog.onStop(AppCompatDialog.java:134)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.app.Dialog.dismissDialog(Dialog.java:378)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.app.Dialog.dismiss(Dialog.java:354)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.support.v7.app.AlertController$ButtonHandler.handleMessage(AlertController.java:171)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.os.Handler.dispatchMessage(Handler.java:105)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.os.Looper.loop(Looper.java:164)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat android.app.ActivityThread.main(ActivityThread.java:6541)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat java.lang.reflect.Method.invoke(Native Method)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\r\n07-21 06:18:30.242  4327  4327 E AndroidRuntime: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)\r\n\r\n```\r\nPaste log here\r\n```\r\n</details>\r\n",
    "closed_by": {
        "login": "gsantner",
        "id": 6735650,
        "node_id": "MDQ6VXNlcjY3MzU2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6735650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gsantner",
        "html_url": "https://github.com/gsantner",
        "followers_url": "https://api.github.com/users/gsantner/followers",
        "following_url": "https://api.github.com/users/gsantner/following{/other_user}",
        "gists_url": "https://api.github.com/users/gsantner/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/gsantner/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gsantner/subscriptions",
        "organizations_url": "https://api.github.com/users/gsantner/orgs",
        "repos_url": "https://api.github.com/users/gsantner/repos",
        "events_url": "https://api.github.com/users/gsantner/events{/privacy}",
        "received_events_url": "https://api.github.com/users/gsantner/received_events",
        "type": "User",
        "site_admin": false
    },
    "reactions": {
        "url": "https://api.github.com/repos/gsantner/markor/issues/1763/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/gsantner/markor/issues/1763/timeline",
    "performed_via_github_app": null,
    "state_reason": "completed"
}