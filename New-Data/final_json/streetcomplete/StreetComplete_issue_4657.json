{
    "url": "https://api.github.com/repos/streetcomplete/StreetComplete/issues/4657",
    "repository_url": "https://api.github.com/repos/streetcomplete/StreetComplete",
    "labels_url": "https://api.github.com/repos/streetcomplete/StreetComplete/issues/4657/labels{/name}",
    "comments_url": "https://api.github.com/repos/streetcomplete/StreetComplete/issues/4657/comments",
    "events_url": "https://api.github.com/repos/streetcomplete/StreetComplete/issues/4657/events",
    "html_url": "https://github.com/streetcomplete/StreetComplete/pull/4657",
    "id": 1468808244,
    "node_id": "PR_kwDOA7jats5D7Wn3",
    "number": 4657,
    "title": "Cycleway overlay",
    "user": {
        "login": "westnordost",
        "id": 4661658,
        "node_id": "MDQ6VXNlcjQ2NjE2NTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4661658?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/westnordost",
        "html_url": "https://github.com/westnordost",
        "followers_url": "https://api.github.com/users/westnordost/followers",
        "following_url": "https://api.github.com/users/westnordost/following{/other_user}",
        "gists_url": "https://api.github.com/users/westnordost/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/westnordost/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/westnordost/subscriptions",
        "organizations_url": "https://api.github.com/users/westnordost/orgs",
        "repos_url": "https://api.github.com/users/westnordost/repos",
        "events_url": "https://api.github.com/users/westnordost/events{/privacy}",
        "received_events_url": "https://api.github.com/users/westnordost/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 38,
    "created_at": "2022-11-29T22:58:58Z",
    "updated_at": "2022-12-27T14:30:09Z",
    "closed_at": "2022-12-05T16:02:27Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
        "url": "https://api.github.com/repos/streetcomplete/StreetComplete/pulls/4657",
        "html_url": "https://github.com/streetcomplete/StreetComplete/pull/4657",
        "diff_url": "https://github.com/streetcomplete/StreetComplete/pull/4657.diff",
        "patch_url": "https://github.com/streetcomplete/StreetComplete/pull/4657.patch",
        "merged_at": "2022-12-05T16:02:27Z"
    },
    "body": "- refactored cycleway, street parking and sidewalk parsers to be be consistent and properly handle all edge cases when tagging only one side (fixes #4634). A side-effect of this is that the app will always merge same `*:left` and `*:right` values to `*:both` as was requested several times somewhere in this issue tracker and where I was like \ud83e\udd37 before.\r\n- refactored cycleway quest to share as much code with the overlay as possible\r\n- fixed a bug in cycleway parsing: If in flow direction of a oneway there was a dual track or dual lane and in contra-flow direction there was nothing, the parser would wrongly interpret the contra-flow side as being \"none, no oneway\", i.e. as if bicycles could go in contraflow on the street itself\r\n- made cycleway parser more strict: The parser does not accept values like `on_street`, `none` etc. anymore / classifies them as `INVALID` rather than `UNKNOWN`\r\n- disabled cycleway quest\r\n- added `cycleway=shoulder` option for overlay and quest (see [discussion](https://community.openstreetmap.org/t/rare-cycleway-value-shoulder-obsolete-or-useful/5849))\r\n- sidewalk overlay: do not show missing sidewalks on roads with a speed limit <= 10 km/h and unpaved roads as missing\r\n- sidewalk overlay: show sidewalks mapped on cycleways, paths etc\r\n- sidewalk overlay: allow editing of sidewalks mapped on exclusive cycleways\r\n- sidewalk overlay: prefer tagging `sidewalk:both=separate` over `sidewalk=separate`\r\n\r\n### Features of the overlay\r\n\r\n<img src=\"https://user-images.githubusercontent.com/4661658/204666419-e7a8eaf2-0423-45ff-969e-54688a9e0f1a.png\" width=\"300\"/>\r\n\r\nDisplay and change cycleway layout.\r\n- Cycleways behind the curb are blue-ish (a track, a shared sidewalk)\r\n- Lanes on the street are yellow-ish\r\n- Black is none\r\n- Red is missing, invalid or ambiguos.\r\n\r\n<img src=\"https://user-images.githubusercontent.com/4661658/204665334-7ff3bf12-9374-4027-96fc-bb8762bbde67.png\" width=\"300\"/>\r\n\r\nDisplay bicycle boulevards, can be selected instead of defining cycleways left and right in countries where they exist legally, see [hasBicycleBoulevard.yml](https://github.com/streetcomplete/countrymetadata/blob/master/data/hasBicycleBoulevard.yml)\r\n\r\n\r\n<img src=\"https://user-images.githubusercontent.com/4661658/204665468-0e0a0d91-5cd0-4021-88df-c1317f232b10.png\" width=\"300\"/>\r\n\r\nChange the cycleway situation on separately mapped ways and paths.\r\n\r\n\r\nhttps://user-images.githubusercontent.com/4661658/204665892-cdda5758-21c4-47d3-88d8-469f2088b218.mp4\r\n\r\nDisplay and select to reverse the direction of cycleways (functionality also added to respective quest). \r\n\r\nThis was necessary because the quest could ignore (=not show) roads tagged with such cycleways, while the overlay must support it in order to not overwrite the data with wrong data.\r\n\r\nYes, this very rarely actually happens, see\r\nhttps://www.openstreetmap.org/way/1032480826\r\nhttps://www.google.de/maps/@40.6761578,-73.9508024,3a,75y,266.58h,74.83t/data=!3m6!1e1!3m4!1snlCNLeAEszlMGEmNGcfURA!2e0!7i16384!8i8192\r\n\r\nThis required a large refactor, because the parser that reads the OSM data, the creator that puts the data model back into the tags and all of the display code needs to handle pairs of cycleway type + cycleway direction. Before, it just had to handle the cycleway type.",
    "closed_by": {
        "login": "westnordost",
        "id": 4661658,
        "node_id": "MDQ6VXNlcjQ2NjE2NTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4661658?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/westnordost",
        "html_url": "https://github.com/westnordost",
        "followers_url": "https://api.github.com/users/westnordost/followers",
        "following_url": "https://api.github.com/users/westnordost/following{/other_user}",
        "gists_url": "https://api.github.com/users/westnordost/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/westnordost/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/westnordost/subscriptions",
        "organizations_url": "https://api.github.com/users/westnordost/orgs",
        "repos_url": "https://api.github.com/users/westnordost/repos",
        "events_url": "https://api.github.com/users/westnordost/events{/privacy}",
        "received_events_url": "https://api.github.com/users/westnordost/received_events",
        "type": "User",
        "site_admin": false
    },
    "reactions": {
        "url": "https://api.github.com/repos/streetcomplete/StreetComplete/issues/4657/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/streetcomplete/StreetComplete/issues/4657/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}