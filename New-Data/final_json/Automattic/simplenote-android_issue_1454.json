{
    "url": "https://api.github.com/repos/Automattic/simplenote-android/issues/1454",
    "repository_url": "https://api.github.com/repos/Automattic/simplenote-android",
    "labels_url": "https://api.github.com/repos/Automattic/simplenote-android/issues/1454/labels{/name}",
    "comments_url": "https://api.github.com/repos/Automattic/simplenote-android/issues/1454/comments",
    "events_url": "https://api.github.com/repos/Automattic/simplenote-android/issues/1454/events",
    "html_url": "https://github.com/Automattic/simplenote-android/pull/1454",
    "id": 975951758,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NzE3MDIzMzAy",
    "number": 1454,
    "title": "Move scroll setup from view tree updates after the note content refreshes",
    "user": {
        "login": "danilo04",
        "id": 195721,
        "node_id": "MDQ6VXNlcjE5NTcyMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/195721?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danilo04",
        "html_url": "https://github.com/danilo04",
        "followers_url": "https://api.github.com/users/danilo04/followers",
        "following_url": "https://api.github.com/users/danilo04/following{/other_user}",
        "gists_url": "https://api.github.com/users/danilo04/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/danilo04/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/danilo04/subscriptions",
        "organizations_url": "https://api.github.com/users/danilo04/orgs",
        "repos_url": "https://api.github.com/users/danilo04/repos",
        "events_url": "https://api.github.com/users/danilo04/events{/privacy}",
        "received_events_url": "https://api.github.com/users/danilo04/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 14892227,
            "node_id": "MDU6TGFiZWwxNDg5MjIyNw==",
            "url": "https://api.github.com/repos/Automattic/simplenote-android/labels/[Type]%20Bug",
            "name": "[Type] Bug",
            "color": "ee0701",
            "default": false,
            "description": "Something isn't working."
        },
        {
            "id": 2715106900,
            "node_id": "MDU6TGFiZWwyNzE1MTA2OTAw",
            "url": "https://api.github.com/repos/Automattic/simplenote-android/labels/consistency",
            "name": "consistency",
            "color": "2A250A",
            "default": false,
            "description": "Issues created in order to align the UX with other platforms"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "danilo04",
        "id": 195721,
        "node_id": "MDQ6VXNlcjE5NTcyMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/195721?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danilo04",
        "html_url": "https://github.com/danilo04",
        "followers_url": "https://api.github.com/users/danilo04/followers",
        "following_url": "https://api.github.com/users/danilo04/following{/other_user}",
        "gists_url": "https://api.github.com/users/danilo04/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/danilo04/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/danilo04/subscriptions",
        "organizations_url": "https://api.github.com/users/danilo04/orgs",
        "repos_url": "https://api.github.com/users/danilo04/repos",
        "events_url": "https://api.github.com/users/danilo04/events{/privacy}",
        "received_events_url": "https://api.github.com/users/danilo04/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "danilo04",
            "id": 195721,
            "node_id": "MDQ6VXNlcjE5NTcyMQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/195721?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/danilo04",
            "html_url": "https://github.com/danilo04",
            "followers_url": "https://api.github.com/users/danilo04/followers",
            "following_url": "https://api.github.com/users/danilo04/following{/other_user}",
            "gists_url": "https://api.github.com/users/danilo04/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/danilo04/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/danilo04/subscriptions",
            "organizations_url": "https://api.github.com/users/danilo04/orgs",
            "repos_url": "https://api.github.com/users/danilo04/repos",
            "events_url": "https://api.github.com/users/danilo04/events{/privacy}",
            "received_events_url": "https://api.github.com/users/danilo04/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": {
        "url": "https://api.github.com/repos/Automattic/simplenote-android/milestones/34",
        "html_url": "https://github.com/Automattic/simplenote-android/milestone/34",
        "labels_url": "https://api.github.com/repos/Automattic/simplenote-android/milestones/34/labels",
        "id": 7078046,
        "node_id": "MI_kwDOAFr4F84AbACe",
        "number": 34,
        "title": "2.21",
        "description": "Freeze: Sept 6, 2021\r\nSubmit: Sept 17, 2021\r\nRelease: Sept 20, 2021",
        "creator": {
            "login": "danilo04",
            "id": 195721,
            "node_id": "MDQ6VXNlcjE5NTcyMQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/195721?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/danilo04",
            "html_url": "https://github.com/danilo04",
            "followers_url": "https://api.github.com/users/danilo04/followers",
            "following_url": "https://api.github.com/users/danilo04/following{/other_user}",
            "gists_url": "https://api.github.com/users/danilo04/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/danilo04/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/danilo04/subscriptions",
            "organizations_url": "https://api.github.com/users/danilo04/orgs",
            "repos_url": "https://api.github.com/users/danilo04/repos",
            "events_url": "https://api.github.com/users/danilo04/events{/privacy}",
            "received_events_url": "https://api.github.com/users/danilo04/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 8,
        "state": "closed",
        "created_at": "2021-08-20T22:16:34Z",
        "updated_at": "2021-09-17T15:22:18Z",
        "due_on": "2021-09-06T07:00:00Z",
        "closed_at": "2021-09-17T15:22:18Z"
    },
    "comments": 1,
    "created_at": "2021-08-20T22:10:01Z",
    "updated_at": "2021-09-03T20:53:10Z",
    "closed_at": "2021-08-24T07:51:22Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
        "url": "https://api.github.com/repos/Automattic/simplenote-android/pulls/1454",
        "html_url": "https://github.com/Automattic/simplenote-android/pull/1454",
        "diff_url": "https://github.com/Automattic/simplenote-android/pull/1454.diff",
        "patch_url": "https://github.com/Automattic/simplenote-android/pull/1454.patch",
        "merged_at": "2021-08-24T07:51:21Z"
    },
    "body": "Fixes #1338\r\n\r\nThe initial scroll position is set based on the last scroll position the user was or on the first keyword found if entering from search results. To set the scroll position, the app used a `ViewTreeObserver` with and set up a `OnGlobalFocusChangeListener` callback listener. The problem with this approach is that this callback gets called several times even after the text has been rendered. Thus, the scroll position for a search was overridden by the scroll position saved in preferences.\r\n\r\n\r\n### Fix\r\nWe now change the scroll setup to after the note contents are refreshed. This happens when the note is loaded and set in the EditText. We post a task on the root view to be sure that the scroll setup is done after the text has been rendered. Also, when there is a configuration change, the note is not refreshed, but the view is re-rendered and the scroll position is lost. We setup the scroll as well when there is a configuration change.\r\n\r\n### Test\r\n**Note:** have a long note where the same term appears in different parts of the note\r\n\r\n1. Have a note that contains some unique keyword (only once, only in one note)\r\n2. Start search against this keyword\r\n3. Tap the note ~> you might firstly see the keyword shown on screen\r\n4. Go back to note list and tap the note again.\r\n5. Tap to the next keyword\r\n6. Rotate phone\r\n\r\nVideo from issue:\r\n\r\nhttps://user-images.githubusercontent.com/73365754/110334627-a67b9c80-802b-11eb-9ee6-c25d524e220f.mp4\r\n\r\nFixed:\r\n\r\n![20210824_005556](https://user-images.githubusercontent.com/195721/130563933-f8ee7ec6-7839-43ff-a471-c63064bb929f.gif)\r\n\r\n\r\n### Review\r\n\r\nOnly one developer is required to review these changes, but anyone can perform the review.\r\n\r\n### Release\r\n\r\n`RELEASE-NOTES.txt` was updated in af046a10e74c078bc37f60700d2e2ece5c4e8fff with:\r\n> Fixed scroll position of a note with matching keyword in not persistent\r\n",
    "closed_by": {
        "login": "planarvoid",
        "id": 1079756,
        "node_id": "MDQ6VXNlcjEwNzk3NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1079756?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/planarvoid",
        "html_url": "https://github.com/planarvoid",
        "followers_url": "https://api.github.com/users/planarvoid/followers",
        "following_url": "https://api.github.com/users/planarvoid/following{/other_user}",
        "gists_url": "https://api.github.com/users/planarvoid/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/planarvoid/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/planarvoid/subscriptions",
        "organizations_url": "https://api.github.com/users/planarvoid/orgs",
        "repos_url": "https://api.github.com/users/planarvoid/repos",
        "events_url": "https://api.github.com/users/planarvoid/events{/privacy}",
        "received_events_url": "https://api.github.com/users/planarvoid/received_events",
        "type": "User",
        "site_admin": false
    },
    "reactions": {
        "url": "https://api.github.com/repos/Automattic/simplenote-android/issues/1454/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Automattic/simplenote-android/issues/1454/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}