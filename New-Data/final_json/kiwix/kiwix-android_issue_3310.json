{
    "url": "https://api.github.com/repos/kiwix/kiwix-android/issues/3310",
    "repository_url": "https://api.github.com/repos/kiwix/kiwix-android",
    "labels_url": "https://api.github.com/repos/kiwix/kiwix-android/issues/3310/labels{/name}",
    "comments_url": "https://api.github.com/repos/kiwix/kiwix-android/issues/3310/comments",
    "events_url": "https://api.github.com/repos/kiwix/kiwix-android/issues/3310/events",
    "html_url": "https://github.com/kiwix/kiwix-android/pull/3310",
    "id": 1713879044,
    "node_id": "PR_kwDOBLs03M5Qtqor",
    "number": 3310,
    "title": "Fixed online content(Zim files) are removed if there is no internet connection",
    "user": {
        "login": "MohitMaliFtechiz",
        "id": 34593983,
        "node_id": "MDQ6VXNlcjM0NTkzOTgz",
        "avatar_url": "https://avatars.githubusercontent.com/u/34593983?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MohitMaliFtechiz",
        "html_url": "https://github.com/MohitMaliFtechiz",
        "followers_url": "https://api.github.com/users/MohitMaliFtechiz/followers",
        "following_url": "https://api.github.com/users/MohitMaliFtechiz/following{/other_user}",
        "gists_url": "https://api.github.com/users/MohitMaliFtechiz/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/MohitMaliFtechiz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MohitMaliFtechiz/subscriptions",
        "organizations_url": "https://api.github.com/users/MohitMaliFtechiz/orgs",
        "repos_url": "https://api.github.com/users/MohitMaliFtechiz/repos",
        "events_url": "https://api.github.com/users/MohitMaliFtechiz/events{/privacy}",
        "received_events_url": "https://api.github.com/users/MohitMaliFtechiz/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2023-05-17T13:08:41Z",
    "updated_at": "2023-05-26T07:39:19Z",
    "closed_at": "2023-05-26T07:39:17Z",
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
        "url": "https://api.github.com/repos/kiwix/kiwix-android/pulls/3310",
        "html_url": "https://github.com/kiwix/kiwix-android/pull/3310",
        "diff_url": "https://github.com/kiwix/kiwix-android/pull/3310.diff",
        "patch_url": "https://github.com/kiwix/kiwix-android/pull/3310.patch",
        "merged_at": "2023-05-26T07:39:17Z"
    },
    "body": "Fixes #3309 \r\n\r\n**What is the issue**\r\n\r\n* We are currently using the deprecated method `conManager.activeNetworkInfo?.isConnected` to check network connectivity. However, starting from Android 23 and above, this method fails to accurately detect the absence of an internet connection. As a result, our condition to prevent loading content when the internet is not available is being bypassed. Consequently, an error message stating `No items available` is displayed because we are unable to fetch the content without an internet connection. https://github.com/kiwix/kiwix-android/blob/ce423820f0b2aee20cdd69e064095ba4db24b4a2/app/src/main/java/org/kiwix/kiwixmobile/nav/destination/library/OnlineLibraryFragment.kt#L337\r\n* The snack bar is not displaying when attempting to download the zim file without an internet connection.\r\n\r\n\r\nhttps://github.com/kiwix/kiwix-android/assets/34593983/e4855a81-e626-4547-90f4-04fd5e03bed4\r\n\r\n\r\n\r\n**Fixes**\r\n* Now we are using the `NetworkCapabilities` API to check internet availability on `Android 23` and above, as it is supported from Android 23 onwards. For devices running below Android 23, we continue to use the `conManager.activeNetworkInfo?.isConnected` method.\r\n* We have made improvements to the `refreshFragment` method. Now, when this method is called, we first check if there is a list of zim files available. If there is no internet connection, we show a snackbar informing the user about the lack of internet access. On the other hand, if there are `no items` available in the zim file list, we display a message saying `No items available` We have made this enhancement to address the issue where a blank screen was appearing when the internet connection was frequently turned on and off.\r\n\r\n\r\nhttps://github.com/kiwix/kiwix-android/assets/34593983/2384a1ba-a934-4cbe-a36e-04f9838bf5c6\r\n\r\n",
    "closed_by": {
        "login": "kelson42",
        "id": 1029718,
        "node_id": "MDQ6VXNlcjEwMjk3MTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1029718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kelson42",
        "html_url": "https://github.com/kelson42",
        "followers_url": "https://api.github.com/users/kelson42/followers",
        "following_url": "https://api.github.com/users/kelson42/following{/other_user}",
        "gists_url": "https://api.github.com/users/kelson42/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/kelson42/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kelson42/subscriptions",
        "organizations_url": "https://api.github.com/users/kelson42/orgs",
        "repos_url": "https://api.github.com/users/kelson42/repos",
        "events_url": "https://api.github.com/users/kelson42/events{/privacy}",
        "received_events_url": "https://api.github.com/users/kelson42/received_events",
        "type": "User",
        "site_admin": false
    },
    "reactions": {
        "url": "https://api.github.com/repos/kiwix/kiwix-android/issues/3310/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/kiwix/kiwix-android/issues/3310/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}